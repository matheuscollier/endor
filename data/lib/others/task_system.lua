task_monsters = {
	[1] = {name = "trolls", storage = 7101, monsters_list = {"troll","frost troll","island troll","furious troll","swamp troll"}, amount = 120, exp = 30000, pointsTask = 1, items = {{id = 2152, count = 50}}},
	[3] = {name = "worms", storage = 7103, monsters_list = {"worm","rotworm"}, amount = 80, exp = 30000, pointsTask = 1, items = {{id = 2152, count = 80}}},
	[5] = {name = "macacos", storage = 7105, monsters_list = {"kongra","sibang","merlkin"}, amount = 120, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[7] = {name = "ursos", storage = 7107, monsters_list = {"bear","polar bear"}, amount = 80, exp = 30000, pointsTask = 1, items = {{id = 2152, count = 50}}},
	[8] = {name = "lobos", storage = 7108, monsters_list = {"wolf","winter wolf","war wolf"}, amount = 80, exp = 30000, pointsTask = 1, items = {{id = 2152, count = 50}}},
	[12] = {name = "elfos", storage = 7112, monsters_list = {"elf","elf scout","elf ranger","elf soldier","high elf"}, amount = 500, exp = 150000, pointsTask = 3, items = {{id = 2160, count = 3}}},
	[13] = {name = "minotauros", storage = 7113, monsters_list = {"minotaur","minotaur archer","minotaur guard","minotaur mage"}, amount = 300, exp = 80000, pointsTask = 2, items = {{id = 2160, count = 2}}},
	[14] = {name = "orcs", storage = 7114, monsters_list = {"orc","uruk-hai","orc spearman","orc warrior","orc shaman","orc berserker","orc leader","orc rider","orc warlord"}, amount = 300, exp = 120000, pointsTask = 2, items = {{id = 2160, count = 3}}},
	[15] = {name = "piratas", storage = 7115, monsters_list = {"pirate marauder","pirate skeleton","pirate buccaneer","pirate corsair","pirate cutthroat","pirate captain","pirate ghost"}, amount = 300, exp = 120000, pointsTask = 2, items = {{id = 2160, count = 3}}},
	[18] = {name = "stone", storage = 7118, monsters_list = {"stone golem","gargoyle","abyssal cursed stone"}, amount = 200, exp = 80000, pointsTask = 2, items = {{id = 2160, count = 3}}},
	[20] = {name = "quaras", storage = 7120, monsters_list = {"quara constrictor","quara mantassin","quara hydromancer","quara pincher","quara predator"}, amount = 600, exp = 180000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[21] = {name = "wyverns", storage = 7121, monsters_list = {"wyvern"}, amount = 300, exp = 150000, pointsTask = 3, items = {{id = 2160, count = 3}}},
	[22] = {name = "slimes", storage = 7122, monsters_list = {"slime","acid blob","death blob","mercury blob"}, amount = 500, exp = 80000, pointsTask = 2, items = {{id = 2160, count = 3}}},
	[23] = {name = "tartarugas", storage = 7123, monsters_list = {"tortoise","thornback tortoise"}, amount = 120, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[24] = {name = "witches", storage = 7124, monsters_list = {"witch","ice witch"}, amount = 500, exp = 150000, pointsTask = 3, items = {{id = 2160, count = 2}}},
	[27] = {name = "insetos", storage = 7127, monsters_list = {"swarmer","insectoid worker","waspoid","crawler"}, amount = 600, exp = 150000, pointsTask = 4, items = {{id = 2160, count = 3}}},
	[28] = {name = "prision", storage = 7128, monsters_list = {"betrayed wraith","dark torturer","demon outcast"}, amount = 1500, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[30] = {name = "hellhounds", storage = 7130, monsters_list = {"hellhound"}, amount = 800, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 5}}},
	[31] = {name = "furys", storage = 7131, monsters_list = {"fury"}, amount = 600, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[34] = {name = "hydras", storage = 7134, monsters_list = {"hydra"}, amount = 1200, exp = 300000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[35] = {name = "ice", storage = 7135, monsters_list = {"frost dragon","frost torog","crystal spider"}, amount = 1200, exp = 300000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[36] = {name = "urulokis", storage = 7136, monsters_list = {"draco","uruloki"}, amount = 1200, exp = 450000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[37] = {name = "underdragons", storage = 7137, monsters_list = {"dragonling","ghastly dragon"}, amount = 1200, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[39] = {name = "stampors", storage = 7139, monsters_list = {"stampor"}, amount = 800, exp = 200000, pointsTask = 3, items = {{id = 2160, count = 5}}},
	[40] = {name = "rhinos", storage = 7140, monsters_list = {"stone rhino"}, amount = 800, exp = 300000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[41] = {name = "heroes", storage = 7141, monsters_list = {"hero"}, amount = 900, exp = 200000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[42] = {name = "knights", storage = 7142, monsters_list = {"black knight"}, amount = 600, exp = 120000, pointsTask = 3, items = {{id = 2160, count = 5}}},
	[43] = {name = "scarabs", storage = 7143, monsters_list = {"ancient scarab","belzebuth minion"}, amount = 800, exp = 300000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[44] = {name = "liches", storage = 7144, monsters_list = {"lich"}, amount = 500, exp = 120000, pointsTask = 3, items = {{id = 2160, count = 5}}},
	[45] = {name = "warlocks", storage = 7145, monsters_list = {"warlock"}, amount = 800, exp = 300000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[46] = {name = "wyrms", storage = 7146, monsters_list = {"wyrm","elder wyrm"}, amount = 1200, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[47] = {name = "lizards", storage = 7147, monsters_list = {"lizard legionnaire","lizard zaogun","lizard chosen","lizard high guard","lizard dragon priest"}, amount = 1800, exp = 300000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[49] = {name = "vampiros", storage = 7149, monsters_list = {"allukard","vampire viscount","mephisto"}, amount = 1200, exp = 600000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[50] = {name = "magos", storage = 7150, monsters_list = {"bloodboil","solarian","shade of akama"}, amount = 1200, exp = 600000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[54] = {name = "maws", storage = 7154, monsters_list = {"frazzlemaw","guzzlemaw"}, amount = 1800, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[55] = {name = "minoisland", storage = 7155, monsters_list = {"minotaur hunter","minotaur amazon","worm priestess", "mooh'tah warrior"}, amount = 1200, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[56] = {name = "glooth", storage = 7156, monsters_list = {"blood beast","glooth anemone"}, amount = 1200, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[57] = {name = "otherworld", storage = 7158, monsters_list = {"breach brood","dread intruder","spark of destruction"}, amount = 600, exp = 900000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[58] = {name = "nightmare", storage = 7159, monsters_list = {"silencer","shock head","chocking fear","nightmare"}, amount = 1200, exp = 450000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[59] = {name = "lightmasters", storage = 7160, monsters_list = {"elf lightmaster"}, amount = 1200, exp = 600000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[60] = {name = "feyrist", storage = 7161, monsters_list = {"faun","pooka","pixie","nymph"}, amount = 800, exp = 120000, pointsTask = 3, items = {{id = 2160, count = 5}}},
	[62] = {name = "underfeyrist", storage = 7163, monsters_list = {"weakened frazzlemaw","enfeebled silencer"}, amount = 1200, exp = 150000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[63] = {name = "terminators", storage = 7164, monsters_list = {"terminator"}, amount = 900, exp = 600000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[64] = {name = "northern", storage = 7165, monsters_list = {"grim reaper","saurons possessed beholder","istari follower"}, amount = 1200, exp = 600000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[65] = {name = "fire", storage = 7166, monsters_list = {"spirit of fire","hellfire fighter"}, amount = 1200, exp = 300000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[66] = {name = "poison", storage = 7157, monsters_list = {"defiler","giant spider"}, amount = 1200, exp = 300000, pointsTask = 4, items = {{id = 2160, count = 5}}},
	[67] = {name = "goblins", storage = 7167, monsters_list = {"goblin","goblin assassin"}, amount = 200, exp = 60000, pointsTask = 2, items = {{id = 2160, count = 2}}},
	[68] = {name = "serpentes", storage = 7168, monsters_list = {"serpent spawn","ice serpente"}, amount = 1200, exp = 300000, pointsTask = 5, items = {{id = 2160, count = 10}}},
	[69] = {name = "larvas", storage = 7169, monsters_list = {"larva"}, amount = 120, exp = 30000, pointsTask = 1, items = {{id = 2152, count = 50}}},
	[70] = {name = "hybrid", storage = 7170, monsters_list = {"vampire bride","werewolf"}, amount = 800, exp = 120000, pointsTask = 3, items = {{id = 2160, count = 5}}},
}

task_daily = {
	[1] = {name = "hydras", storage = 7201, monsters_list = {"hydra"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[2] = {name = "dragons", storage = 7202, monsters_list = {"dragon","dragon lord"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[3] = {name = "lizards", storage = 7203, monsters_list = {"lizard legionnaire","lizard zaogun","lizard chosen","lizard high guard","lizard dragon priest"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[4] = {name = "drakens", storage = 7204, monsters_list = {"draken warmaster","draken spellweaver","draken elite","draken abomination"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[5] = {name = "destroyers", storage = 7205, monsters_list = {"destroyer","gravedigger","plaguesmith"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[6] = {name = "serpentes", storage = 7206, monsters_list = {"serpent spawn","ice serpente"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[7] = {name = "urulokis", storage = 7207, monsters_list = {"draco","uruloki"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[8] = {name = "behemoths", storage = 7208, monsters_list = {"behemoth", "mancubus"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[9] = {name = "magos", storage = 7209, monsters_list = {"bloodboil","solarian","shade of akama"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[10] = {name = "lightmasters", storage = 7210, monsters_list = {"elf lightmaster"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[11] = {name = "wyrm", storage = 7211, monsters_list = {"wyrm","elder wyrm"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[12] = {name = "demons", storage = 7212, monsters_list = {"demon","demon outcast"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[13] = {name = "crystal", storage = 7213, monsters_list = {"ironblight","stone devourer","cliff strider"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[14] = {name = "vampiros", storage = 7214, monsters_list = {"allukard","vampire viscount","mephisto"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[15] = {name = "underdragons", storage = 7215, monsters_list = {"dragonling","ghastly dragon"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[16] = {name = "fire", storage = 7216, monsters_list = {"spirit of fire","hellfire fighter"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[17] = {name = "stampors", storage = 7217, monsters_list = {"stampor"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[18] = {name = "heroes", storage = 7218, monsters_list = {"hero"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[19] = {name = "ice", storage = 7219, monsters_list = {"frost dragon","frost torog","crystal spider"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
	[20] = {name = "minoisland", storage = 7220, monsters_list = {"minotaur hunter","minotaur amazon","worm priestess", "mooh'tah warrior"}, amount = 300, exp = 50000, pointsTask = 1, items = {{id = 2160, count = 1}}},
}

task_especial = {
	[1] = {name = "hellsing", storage = 7301, monsters_list = {"allukard","vampire viscount","mephisto"}, amount = 8888, exp = 888888, pointsTask = 30, items = {{id = 2072, count = 1}}},
	[2] = {name = "fingolfin", storage = 7302, monsters_list = {"warlock"}, amount = 4444, exp = 444444, pointsTask = 30, items = {{id = 7889, count = 1}}},
	[3] = {name = "geralt", storage = 7303, monsters_list = {"demon"}, amount = 6666, exp = 666666, pointsTask = 30, items = {{id = 7890, count = 1}}},
	[4] = {name = "alberich", storage = 7304, monsters_list = {"frost dragon","frost torog","crystal spider"}, amount = 7777, exp = 777777, pointsTask = 30, items = {{id = 7888, count = 1}}},
	[5] = {name = "flamel", storage = 7305, monsters_list = {"bloodboil","solarian","shade of akama"}, amount = 8888, exp = 888888, pointsTask = 30, items = {{id = 29033, count = 1}}},
	[6] = {name = "theseus", storage = 7306, monsters_list = {"minotaur hunter","minotaur amazon","worm priestess", "mooh'tah warrior"}, amount = 7777, exp = 777777, pointsTask = 30, items = {{id = 2218, count = 1}}},
	[7] = {name = "perseus", storage = 7307, monsters_list = {"medusa"}, amount = 8888, exp = 888888, pointsTask = 30, items = {{id = 8909, count = 1}}},
	[8] = {name = "ragnarok", storage = 7308, monsters_list = {"breach brood","dread intruder","spark of destruction"}, amount = 9999, exp = 999999, pointsTask = 30, items = {{id = 8908, count = 1}}},
}

-- lembrando que os monsters na "name" e na "monsters_list" devem ser sempre em letra minuscula!

task_current = 7000 -- storage que verifica se esta fazendo alguma task e ver qual - task normal
task_points = 7001 -- storage que retorna a quantidade de pontos task que o player tem.
task_delay = 7002 -- storage de delay para nao poder fazer a task novamente caso ela for abandonada.
task_time = 5 -- tempo em minutos que o player ficara sem fazer a task como punicao
task_rank = 7003 -- storage do rank task
task_daily_current = 7004 -- storage que verifica se esta fazendo alguma task e ver qual - task daily
task_daily_time = 7005 -- storage do tempo da task daily, no caso para verificar e add 24 horas para fazer novamente a task daily
task_especial_current = 7006 -- storage que verifica se esta fazendo alguma task e ver qual - task especial

local ranks_task = {
	[{0, 100}] = "Newbie", 
	[{101, 200}] = "Explorer",
	[{201, 300}] = "Elite Explorer",
	[{301, 500}] = "Master Explorer",		
	[{501, math.huge}] = "Divine Explorer"
}

function Player.getTask(self)
	return self:getStorageValue(task_current) > 0 and task_monsters[self:getStorageValue(task_current)] or false
end

function Player.getDailyTask(self)
	return self:getStorageValue(task_daily_current) > 0 and task_daily[self:getStorageValue(task_daily_current)] or false
end

function Player.getSpecialTask(self)
	return self:getStorageValue(task_especial_current) > 0 and task_especial[self:getStorageValue(task_especial_current)] or false
end

function Player.getTaskPoints(self)
	return self:getStorageValue(task_points) > 0 and self:getStorageValue(task_points) or 0
end

function Player.addTaskPoints(self, count)
	return self:setStorageValue(task_points, self:getTaskPoints() + count)
end

function Player.removeTaskPoints(self, count)
	return self:setStorageValue(task_points, self:getTaskPoints() - count)
end

function Player.rankTask(self)
	local pontos = self:getTaskPoints()
	for rank, rankName in pairs(ranks_task) do
		if pontos >= rank[1] and pontos <= rank[2] then
			return rankName
		end
	end
	return 0
end

function getItemsFromTable(itemtable)
	local text = ""
	for v = 1, #itemtable do
		local count, info = itemtable[v].count, ItemType(itemtable[v].id)
		local ret = ", "
		if v == 1 then
			ret = ""
		elseif v == #itemtable then
			ret = " - "
		end
		text = text .. ret
		text = text .. (count > 1 and count or info:getArticle()).." "..(count > 1 and info:getPluralName() or info:getName())
	end
	return text
end

function Player.taskReward(self, points, items, exp, storage_task, storage_task_current)
	local txt = "Thanks for doing the task, your awards are: "..points.." task points, "
	if #getItemsFromTable(items) > 0 then
		txt = txt.." "..getItemsFromTable(items)..", "
		for x = 1, #items do
			self:addItem(items[x].id, items[x].count)
		end
	end
	if exp > 0 then
		txt = txt.." "..exp.." of experience, "
		self:addExperience(exp)
	end
	text = txt.." and even more!"
	self:addTaskPoints(points)
	self:setStorageValue(storage_task, 0)
	self:setStorageValue(storage_task_current, 0)
	return txt
end